---
- name: Provision AWS infra + EC2 (no SSH, SSM)
  hosts: localhost
  connection: local
  gather_facts: false
  vars:
    aws_region: "{{ aws_region | default('ap-northeast-2') }}"
    environment: "{{ environment | default('dev') }}"
    vpc_cidr: "10.10.0.0/16"
    public_subnet_cidr: "10.10.1.0/24"
    instance_type: "t3.micro"
    instance_count: 1
    tag_base:
      Project: "ansible-aws-docker-ops"
      Environment: "{{ environment }}"
      AnsibleManaged: "true"
      AnsibleUser: "ubuntu"
      Role: "app"
  roles:
    - aws_ssm_provision
